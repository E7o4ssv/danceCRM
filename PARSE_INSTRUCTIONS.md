# Инструкции по парсингу данных студентов

## Варианты парсинга

### 1. Парсинг через API (Рекомендуемый)

**Файл:** `parse-students-server.js`

**Использование:**
```bash
node parse-students-server.js
```

**Особенности:**
- Запрашивает логин и пароль интерактивно
- Поддерживает разные серверы (development/production)
- Сохраняет данные в JSON и CSV форматах
- Показывает подробную статистику

### 2. Быстрый парсинг

**Файл:** `parse-students-quick.js`

**Использование:**
```bash
node parse-students-quick.js
```

**Особенности:**
- Использует сохраненные учетные данные
- Быстрый запуск без ввода данных
- Сохраняет в JSON и CSV

### 3. Парсинг через MongoDB

**Файл:** `parse-students-mongo.js`

**Использование:**
```bash
node parse-students-mongo.js
```

**Особенности:**
- Прямое подключение к базе данных
- Не требует авторизации
- Требует доступ к MongoDB

## Настройка

### Для API парсинга:

1. Отредактируйте `parse-students-server.js`:
   ```javascript
   const ENVIRONMENT = 'production'; // или 'development'
   ```

2. Для быстрого парсинга отредактируйте `parse-students-quick.js`:
   ```javascript
   const CREDENTIALS = {
     username: 'ваш_логин',
     password: 'ваш_пароль'
   };
   ```

### Для MongoDB парсинга:

1. Отредактируйте `parse-students-mongo.js`:
   ```javascript
   const MONGODB_URI = 'mongodb://localhost:27017/dance';
   ```

## Установка зависимостей

```bash
npm install axios mongoose
```

## Результаты

Все скрипты создают папку `parsed-data` и сохраняют:

- **JSON файлы** - полные данные в структурированном виде
- **CSV файлы** - данные в табличном формате для Excel

## Структура данных

### Студент содержит:
- `_id` - уникальный идентификатор
- `name` - имя студента
- `phone` - номер телефона (опционально)
- `isActive` - активен ли студент
- `groups` - массив групп студента
- `createdAt` - дата создания

### Группа содержит:
- `_id` - уникальный идентификатор
- `name` - название группы
- `room` - помещение
- `dayOfWeek` - день недели
- `time` - время занятий

## Примеры использования

### Получить всех студентов:
```bash
node parse-students-quick.js
```

### Получить студентов с интерактивным вводом:
```bash
node parse-students-server.js
```

### Получить студентов напрямую из БД:
```bash
node parse-students-mongo.js
```

## Обработка ошибок

- **401 Unauthorized** - неверные учетные данные
- **403 Forbidden** - недостаточно прав
- **500 Server Error** - ошибка сервера
- **Connection Error** - проблемы с подключением

## Безопасность

- Не сохраняйте пароли в коде для продакшена
- Используйте переменные окружения для чувствительных данных
- Регулярно обновляйте токены доступа 